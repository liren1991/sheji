<!doctype html>
<html class="no-js" lang="zxx" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>毕业设计</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicons -->
    <link rel="shortcut icon" th:href="@{/img/favicon.ico}">
    <!-- Fontawesome css -->
    <link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
    <!-- Ionicons css -->
    <link rel="stylesheet" th:href="@{/css/ionicons.min.css}">
    <!-- linearicons css -->
    <link rel="stylesheet" th:href="@{/css/linearicons.css}">
    <!-- Nice select css -->
    <link rel="stylesheet" th:href="@{/css/nice-select.css}">
    <!-- Jquery fancybox css -->
    <link rel="stylesheet" th:href="@{/css/jquery.fancybox.css}">
    <!-- Jquery ui price slider css -->
    <link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}">
    <!-- Meanmenu css -->
    <link rel="stylesheet" th:href="@{/css/meanmenu.min.css}">
    <!-- Nivo slider css -->
    <link rel="stylesheet" th:href="@{/css/nivo-slider.css}">
    <!-- Owl carousel css -->
    <link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}">
    <!-- Bootstrap css -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- Custom css -->
    <link rel="stylesheet" th:href="@{/css/default.css}">
    <!-- Main css -->
    <link rel="stylesheet" th:href="@{/style.css}">
    <!-- Responsive css -->
    <link rel="stylesheet" th:href="@{/css/responsive.css}">
    <!-- Modernizer js -->
    <script th:src="@{/js/vendor/modernizr-3.5.0.min.js}"></script>

</head>

<body>
<!--[if lte IE 9]>
<p class="browserupgrade">您的浏览器 <strong>版本过低</strong>. 请 <a
        href="/https://browsehappy.com/">升级</a> 您的浏览器.</p>
<![endif]-->

<!-- Main Wrapper Start Here -->
<div class="wrapper">
    <!-- Banner Popup Start -->
    <div class="popup_banner">
        <span class="popup_off_banner">×</span>
        <div class="banner_popup_area">
            <img th:src="@{/img/banner/pop-banner.jpg}" alt="">
        </div>
    </div>
    <!-- Banner Popup End -->
    <!-- Main Header Area Start Here -->
    <header>
        <!-- Header Middle Start Here -->
        <div class="header-middle ptb-15">
            <div class="container">
                <div class="row align-items-center no-gutters}">
                    <div class="col-lg-3 col-md-12">
                        <div class="logo mb-all-30">
                            <a th:href="@{/index.html}"><img th:src="@{/img/logo/logo.png}" alt="logo-image"></a>
                        </div>
                    </div>
                    <!-- Categorie Search Box Start Here -->
                    <div class="col-lg-5 col-md-8 ml-auto mr-auto col-10">
                        <div class="categorie-search-box">
                            <div>
                                <div class="form-group">
                                    <select class="bootstrap-select" name="searchType" id="searchType" >
                                        <option value="0">全部</option>
                                        <option value="1">项目</option>
                                        <option value="2">书籍</option>
                                    </select>
                                </div>
                                <input type="text" name="search" placeholder="搜索..." id="search">
                                <button onclick="listProduct()"><i class="lnr lnr-magnifier"></i></button>
                            </div>
                        </div>
                    </div>
                    <!-- Categorie Search Box End Here -->
                    <!-- Cart Box Start Here -->
                    <div class="col-lg-4 col-md-12">
                        <div class="cart-box mt-all-30">
                            <ul class="d-flex justify-content-lg-end justify-content-center align-items-center">
                                <li><a href="#"><i class="lnr lnr-cart"></i><span class="my-cart"><span
                                        class="total-pro">2</span><span>购物车</span></span></a>
                                    <ul class="ht-dropdown cart-box-width">
                                        <li>
                                            <!-- Cart Box Start -->
                                            <div class="single-cart-box">
                                                <div class="cart-img">
                                                    <a href="#"><img th:src="@{/img/products/1.jpg}"
                                                                     alt="cart-image"></a>
                                                </div>
                                                <div class="cart-content">
                                                    <h6><a th:href="@{/product.html}">Printed Summer Red </a></h6>
                                                    <span class="cart-price">¥27.45</span>
                                                </div>
                                                <a class="del-icone" href="#"><i class="ion-close"></i></a>
                                            </div>
                                            <!-- Cart Box End -->

                                            <!-- Cart Box Start -->
                                            <div class="single-cart-box">
                                                <div class="cart-img">
                                                    <a href="#"><img th:src="@{/img/products/2.jpg}"
                                                                     alt="cart-image"></a>
                                                </div>
                                                <div class="cart-content">
                                                    <h6><a th:href="@{/product.html}">Printed Round Neck</a></h6>
                                                    <span class="cart-price">¥45.00</span>
                                                </div>
                                                <a class="del-icone" href="#"><i class="ion-close"></i></a>
                                            </div>
                                            <!-- Cart Box End -->
                                            <!-- Cart Footer Inner Start -->
                                            <div class="cart-footer">
                                                <ul class="price-content">
                                                    <li>商品总额 <span>¥57.95</span></li>
                                                    <li>优惠金额 <span>¥7.00</span></li>
                                                    <li>应付总额 <span>¥64.95</span></li>
                                                </ul>
                                                <div class="cart-actions text-center">
                                                    <a class="cart-checkout" th:href="@{/checkout.html}">去下单</a>
                                                </div>
                                            </div>
                                            <!-- Cart Footer Inner End -->
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#"><i class="lnr lnr-user"></i><span class="my-cart"><span>管理员</span><span>登录</span></span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- Cart Box End Here -->
                </div>
                <!-- Row End -->
            </div>
            <!-- Container End -->
        </div>
        <!-- Header Middle End Here -->

    </header>
    <!-- Main Header Area End Here -->

    <!-- Shop Page Start -->
    <div class="main-shop-page pt-100 pb-100 ptb-sm-60">
        <div class="container">
            <!-- Row End -->
            <div class="row">
                <!-- Sidebar Shopping Option Start -->
                <div class="col-lg-3 order-2 order-lg-1">
                    <div class="sidebar">
                        <!-- Price Filter Options Start -->
                        <div class="search-filter mb-40">
                            <h3 class="sidebar-title">价格区间</h3>
                            <form action="#" class="sidbar-style">
                                <div id="slider-range"></div>
                                <input type="text" id="amount" class="amount-range" readonly onchange="listProduct()">
                            </form>
                        </div>
                        <!-- Price Filter Options End -->

                        <!-- Product Top Start -->
                        <div class="top-new mb-40">
                            <h3 class="sidebar-title">排行榜</h3>
                            <div class="side-product-active owl-carousel">
                                <!-- Side Item Start -->
                                <div class="side-pro-item" >
                                    <!-- Single Product Start -->
                                    <div class="single-product single-product-sidebar" th:each="product:${pageResult.beanList}">
                                        <!-- Product Image Start -->
                                        <div class="pro-img">
                                            <a th:href="@{/product.html}">
                                                <img class="primary-img" th:src="@{/img/products/20.jpg}" alt="single-product">
<!--                                                <img class="secondary-img" th:src="@{/img/products/19.jpg}" alt="single-product">-->
                                            </a>
                                        </div>
                                        <!-- Product Image End -->
                                        <!-- Product Content Start -->
                                        <div class="pro-content">
                                            <h4><a th:href="@{/product.html}" th:text="${product.name}"></a></h4>
                                            <p><span class="price" th:text="|¥,${product.price}|">¥130.45</span>
                                                <del class="prev-price" th:text="|¥,${product.price}|">180.50</del>
                                            </p>
                                        </div>
                                        <!-- Product Content End -->
                                    </div>
                                    <!-- Single Product End -->
                                </div>
                                <!-- Side Item End -->
                            </div>
                        </div>
                        <!-- Product Top End -->
                    </div>
                </div>
                <!-- Sidebar Shopping Option End -->
                <!-- Product Categorie List Start -->
                <div class="col-lg-9 order-1 order-lg-2">
                    <!-- Grid & List View Start -->
                    <div class="grid-list-top border-default universal-padding d-md-flex justify-content-md-between align-items-center mb-30">
                        <div class="grid-list-view  mb-sm-15">
                            <ul class="nav tabs-area d-flex align-items-center">
                                <li><a class="active" data-toggle="tab" href="#grid-view"><i class="fa fa-th"></i></a>
                                </li>
                                <li><a data-toggle="tab" href="#list-view"><i class="fa fa-list-ul"></i></a></li>
                            </ul>
                        </div>
                        <!-- Toolbar Short Area Start -->
                        <div class="main-toolbar-sorter clearfix">
                            <div class="toolbar-sorter d-flex align-items-center">
                                <label>排序:</label>
                                <select class="sorter wide" name="sortType" id="sortType" onchange="listProduct()">
                                    <option value="0">综合排序</option>
                                    <option value="1">下载量</option>
                                    <option value="2">价格</option>
                                    <option value="3">评价</option>
                                </select>
                            </div>
                        </div>
                        <!-- Toolbar Short Area End -->
                        <!-- Toolbar Short Area Start -->
                        <div class="main-toolbar-sorter clearfix">
                            <div class="toolbar-sorter d-flex align-items-center">
                                <label>条数:</label>
                                <select class="sorter wide" id="pageSize" onchange="listProduct()">
                                    <option value="30">30</option>
                                    <option value="60">60</option>
                                    <option value="90">90</option>
                                </select>
                            </div>
                        </div>
                        <!-- Toolbar Short Area End -->
                    </div>
                    <!-- Grid & List View End -->
                    <div class="main-categorie mb-all-40">
                        <!-- Grid & List Main Area End -->
                        <div class="tab-content fix">
                            <div id="grid-view" class="tab-pane fade show active">
                                <div class="row" id="grid-view-row">
                                    <!-- Single Product Start -->
                                    <div class="col-lg-4 col-md-4 col-sm-6 col-6" th:each="product:${pageResult.beanList}">
                                        <div class="single-product">
                                            <!-- Product Image Start -->
                                            <div class="pro-img">
                                                <a th:href="@{/product.html}">
                                                    <img class="my-primary-img" th:src="@{/img/products/1.jpg}" alt="single-product">
<!--                                                    <img class="secondary-img" th:src="@{/img/products/2.jpg}" alt="single-product">-->
                                                </a>
                                            </div>
                                            <!-- Product Image End -->
                                            <!-- Product Content Start -->
                                            <div class="pro-content">
                                                <div>
                                                    <h4><a th:href="@{/product.html}" th:text="${product.name}"></a></h4>
                                                    <p><span class="price" th:text="|¥,${product.price}|">¥320.45</span>
                                                        <del class="prev-price" th:text="|¥,${product.price}|">¥400.50</del>
                                                    </p>
                                                </div>
                                                <div class="pro-actions}">
                                                    <div class="actions-primary">
                                                        <a> + 购物车</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Product Content End -->
                                        </div>
                                    </div>
                                    <!-- Single Product End -->
                                </div>
                                <!-- Row End -->
                            </div>
                            <div id="list-view" class="tab-pane fade">
                                <!-- Single Product Start -->
                                <div class="single-product" th:each="product:${pageResult.beanList}">
                                    <div class="row">
                                        <!-- Product Image Start -->
                                        <div class="col-lg-4 col-md-5 col-sm-12">
                                            <div class="pro-img">
                                                <a href="product.html">
                                                    <img class="my-primary-img" src="img/products/23.jpg" alt="single-product">
<!--                                                    <img class="secondary-img" src="img/products/24.jpg" alt="single-product">-->
                                                </a>
                                                <span class="sticker-new">新上架</span>
                                            </div>
                                        </div>
                                        <!-- Product Image End -->
                                        <!-- Product Content Start -->
                                        <div class="col-lg-8 col-md-7 col-sm-12">
                                            <div class="pro-content hot-product2">
                                                <h4><a href="product.html" th:text="${product.name}"></a></h4>
                                                <p><span class="price" th:text="|¥,${product.price}|"></span></p>
                                                <p th:text="${product.remark}"></p>
                                                <div class="pro-actions">
                                                    <div class="actions-primary">
                                                        <a>+ 购物车</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Product Content End -->
                                    </div>
                                </div>
                                <!-- Single Product End -->
                            </div>

                            <!--        分页插件    -->
                            <div id="pagination" class="pagination-sm simple-pagination"></div>
                            <!-- Product Pagination Info -->
                        </div>
                        <!-- Grid & List Main Area End -->
                    </div>
                </div>
                <!-- product Categorie List End -->
            </div>
            <!-- Row End -->
        </div>
        <!-- Container End -->
    </div>
    <!-- Shop Page End -->

    <!-- Footer Area Start Here -->
    <footer class="off-white-bg2 pt-95 bdr-top pt-sm-55">
        <!-- Footer Top Start -->
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <!-- Single Footer Start -->
                    <div class="col-lg-2 col-md-4 col-sm-6">
                        <div class="single-footer mb-sm-40">
                            <h3 class="footer-title">Information</h3>
                            <div class="footer-content">
                                <ul class="footer-list">
                                    <li><a th:href="@{/about.html}">About Us</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a th:href="@{/contact.html}">Terms & Conditions</a></li>
                                    <li><a th:href="@{/login.html}">FAQs</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Single Footer Start -->

                    <!-- Single Footer Start -->
                    <div class="col-lg-4 col-md-6 col-sm-6">
                        <div class="single-footer mb-sm-40">
                            <h3 class="footer-title">联系方式</h3>
                            <div class="footer-content">
                                <ul class="address-content">
                                    <li><i class="lnr lnr-user"></i>QQ:&nbsp;&nbsp;&nbsp;<span>742950006</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>1365181898</span>
                                    </li>
                                    <li>
                                        <i class="lnr lnr-envelope"></i>Mail:&nbsp;&nbsp;&nbsp;<span>742950006@qq.com</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>1365181898@qq.com</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Single Footer Start -->
                </div>
                <!-- Row End -->
            </div>
            <!-- Container End -->
        </div>
        <!-- Footer Top End -->
        <!-- Footer Bottom Start -->
        <div class="footer-bottom pb-30">
            <div class="container">

                <div class="copyright-text text-center">
                    <p>Copyright © 2018 <a target="_blank" href="#" >Truemart</a> All Rights Reserved.</p>
                </div>
            </div>
            <!-- Container End -->
        </div>
        <!-- Footer Bottom End -->
    </footer>
    <!-- Footer Area End Here -->
</div>
<!-- jquery 3.2.1 -->
<script th:src="@{/js/vendor/jquery-3.2.1.min.js}"></script>
<!-- Countdown js -->
<script th:src="@{/js/jquery.countdown.min.js}"></script>
<!-- Mobile menu js -->
<script th:src="@{/js/jquery.meanmenu.min.js}"></script>
<!-- ScrollUp js -->
<script th:src="@{/js/jquery.scrollUp.js}"></script>
<!-- Nivo slider js -->
<script th:src="@{/js/jquery.nivo.slider.js}"></script>
<!-- Fancybox js -->
<script th:src="@{/js/jquery.fancybox.min.js}"></script>
<!-- Jquery nice select js -->
<script th:src="@{/js/jquery.nice-select.min.js}"></script>
<!-- Jquery ui price slider js -->
<script th:src="@{/js/jquery-ui.min.js}"></script>
<!-- Owl carousel -->
<script th:src="@{/js/owl.carousel.min.js}"></script>
<!-- Bootstrap popper js -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap js -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Plugin js -->
<script th:src="@{/js/plugins.js}"></script>
<!-- Main activaion js -->
<script th:src="@{/js/main.js}"></script>
<script th:src="@{/js/pages.js}"></script>
<script type="text/javascript">
    var totalPageCount = [[${totalPageCount}]];

    $('#pagination').pagination({
        pages: totalPageCount,
        edges: 1,
        cssStyle: 'pagination-sm',
        displayedPages: 5,
        onPageClick: function (pageNumber, event) {
            listProduct(pageNumber);
        },
        onInit: function (getid) {}
    });

    function listProduct(pageThis) {
        var searchType = $("#searchType").val();
        var search = $("#search").val();
        var amountStr = $("#amount").val().toString();
        var amountArray = amountStr.replace(new RegExp(/" "|¥/,"gm"),"").split(/-/);
        var startPrice = amountArray[0];
        var endPrice = amountArray[1];
        var sortType = $("#sortType").val();
        var pageSize = $("#pageSize").val();
        var pageNum;
        if (pageThis == "" || pageThis == null)
            pageNum = 1;
        else{
            pageNum = pageThis
        }

        $.ajax({
            url:"/user/listProduct.html",
            type: "get",
            data:{name:search,type:searchType,sortType:sortType,pageNum:pageNum,pageSize:pageSize,startPrice:startPrice,endPrice:endPrice},
            dataType:"json",
            success:function (data) {
                $("#grid-view-row").html(data.data.gridView);
                $("#list-view").html(data.data.listView);

                if (pageSize > 30){
                    $('#pagination').pagination({
                        pages: data.data.totalPageCount,
                        edges: 1,
                        cssStyle: 'pagination-sm',
                        displayedPages: 5,
                        onPageClick: function (pageNumber, event) {
                            listProduct(pageNumber);
                        },
                        onInit: function (getid) {}
                    });
                }


            }
        })

    }
</script>
</body>

</html>